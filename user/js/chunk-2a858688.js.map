{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/views/userInfo/Password.vue?ed9a","webpack:///./src/views/userInfo/Password.vue?f0b5","webpack:///src/views/userInfo/Password.vue","webpack:///./src/views/userInfo/Password.vue?fb81","webpack:///./src/views/userInfo/Password.vue"],"names":["dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","this","match","e","render","_vm","_h","$createElement","_c","_self","staticClass","on","handleClick","model","value","callback","$$v","currentSection","expression","attrs","ref","ruleForm","rules","staticStyle","domProps","_s","phone","_v","$set","sendLoading","$event","preventDefault","sendCode","codeDesc","loading","submitForm","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2a858688.js","sourcesContent":["var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Password.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Password.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"forgetPassword\"},[_c('el-tabs',{on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.currentSection),callback:function ($$v) {_vm.currentSection=$$v},expression:\"currentSection\"}},[_c('el-tab-pane',{attrs:{\"label\":\"登陆密码\",\"name\":\"login\"}}),_c('el-tab-pane',{attrs:{\"label\":\"交易密码\",\"name\":\"pay\"}}),_c('div',{staticClass:\"container\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"100px\",\"hide-required-asterisk\":\"\"}},[_c('el-form-item',{attrs:{\"prop\":\"phone\",\"label\":\"手机号：\"}},[_c('span',{staticStyle:{\"float\":\"left\"},domProps:{\"textContent\":_vm._s(_vm.phone)}},[_vm._v(\"111111111\")])]),_c('el-form-item',{staticClass:\"code\",attrs:{\"prop\":\"verificationCode\",\"label\":\"手机验证码：\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入接收到的验证码\"},model:{value:(_vm.ruleForm.verificationCode),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"verificationCode\", $$v)},expression:\"ruleForm.verificationCode\"}}),_c('el-button',{staticClass:\"code\",attrs:{\"loading\":_vm.sendLoading},on:{\"click\":function($event){$event.preventDefault();return _vm.sendCode($event)}}},[_vm._v(_vm._s(_vm.codeDesc))])],1),_c('el-form-item',{attrs:{\"prop\":\"newPwd\",\"label\":_vm.currentSection==='login'?'新登录密码：':'新支付密码：'}},[_c('el-input',{attrs:{\"placeholder\":_vm.currentSection==='login'?'请输入新登录密码':'请输入新支付密码',\"type\":\"password\"},model:{value:(_vm.ruleForm.newPwd),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"newPwd\", $$v)},expression:\"ruleForm.newPwd\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"newPwdConfirm\",\"label\":\"确认密码：\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.currentSection==='login'?'重复输入登录密码':'重复输入支付密码',\"type\":\"password\"},model:{value:(_vm.ruleForm.newPwdConfirm),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"newPwdConfirm\", $$v)},expression:\"ruleForm.newPwdConfirm\"}})],1),_c('el-form-item',{staticClass:\"button\",attrs:{\"label-width\":\"0\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"确定\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"forgetPassword\">\r\n        <el-tabs v-model=\"currentSection\"\r\n                 @tab-click=\"handleClick\">\r\n            <el-tab-pane label=\"登陆密码\" name=\"login\"></el-tab-pane>\r\n            <el-tab-pane label=\"交易密码\" name=\"pay\"></el-tab-pane>\r\n            <div class=\"container\">\r\n                <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"demo-ruleForm\" label-width=\"100px\" hide-required-asterisk>\r\n                    <el-form-item prop=\"phone\" label=\"手机号：\">\r\n                        <span style=\"float: left\" v-text=\"phone\">111111111</span>\r\n                    </el-form-item>\r\n                    <el-form-item prop=\"verificationCode\" label=\"手机验证码：\" class=\"code\">\r\n                        <el-input placeholder=\"请输入接收到的验证码\" v-model=\"ruleForm.verificationCode\"></el-input>\r\n                        <el-button @click.prevent=\"sendCode\" class=\"code\" :loading=\"sendLoading\">{{codeDesc}}</el-button>\r\n                    </el-form-item>\r\n                    <el-form-item prop=\"newPwd\" :label=\"currentSection==='login'?'新登录密码：':'新支付密码：'\">\r\n                        <el-input :placeholder=\"currentSection==='login'?'请输入新登录密码':'请输入新支付密码'\" v-model=\"ruleForm.newPwd\" type=\"password\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item prop=\"newPwdConfirm\" label=\"确认密码：\">\r\n                        <el-input :placeholder=\"currentSection==='login'?'重复输入登录密码':'重复输入支付密码'\" v-model=\"ruleForm.newPwdConfirm\" type=\"password\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label-width=\"0\" class=\"button\">\r\n                        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\" :loading=\"loading\">确定</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </el-tabs>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'password',\r\n    data() {\r\n      const validatePass = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('请输入密码'));\r\n        } else {\r\n          if (this.ruleForm.newPwdConfirm !== '') {\r\n            this.$refs.ruleForm.validateField('newPwdConfirm');\r\n          }\r\n          callback();\r\n        }\r\n      };\r\n      const validatePass2 = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('请再次输入密码'));\r\n        } else if (value !== this.ruleForm.newPwd) {\r\n          callback(new Error('两次输入密码不一致!'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      return {\r\n        loading: false,\r\n        sendLoading: false,\r\n        currentSection: 'login',\r\n        codeDesc: '发送验证码',\r\n        total: 180,\r\n        phone: '',\r\n        ruleForm: {\r\n          verificationCode: '',\r\n          newPwd: '',\r\n          newPwdConfirm: '',\r\n        },\r\n        rules: {\r\n          code:[\r\n            {\r\n              required: true,message:'请输入手机验证码',trigger:'blur'\r\n            }\r\n          ],\r\n          password: [\r\n            {\r\n              validator: validatePass,trigger: 'blur'\r\n            }\r\n          ],\r\n          checkPass: [\r\n            {\r\n              validator: validatePass2,trigger: 'blur'\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    async created(){\r\n      const result = await this.$API.request(this.$API.getUserInfo, 'POST');\r\n      if (result && result.success) {\r\n        this.phone = result.data.phone;\r\n      } else {\r\n        if (result.code === 'OVERTIME') {\r\n          this.$router.push('/login')\r\n        } else {\r\n          this.$message.info(result.msg)\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      async sendCode(){\r\n        if(!this.phone){\r\n          this.$message({\r\n            message: '请输入手机号',\r\n            type: 'warning'\r\n          });\r\n          return;\r\n        }\r\n        if(this.total!==180){\r\n          return;\r\n        }\r\n        const that = this;\r\n        this.sendLoading=true;\r\n        const type = this.currentSection==='login'?'pwd':'payPwd';\r\n        const result = await this.$API.request(this.$API.getSmsCode,'POST',{phone: this.phone, type: type});\r\n        this.sendLoading=false;\r\n        if(result && result.success){\r\n          const t = setInterval(function(){\r\n            that.total-=1;\r\n            that.codeDesc=that.total+'s';\r\n            if(that.total<1){\r\n              that.codeDesc='发送验证码';\r\n              that.total=180;\r\n              clearInterval(t)\r\n            }\r\n          },1000)\r\n        } else {\r\n          this.$message.info(result.msg)\r\n        }\r\n      },\r\n      handleClick(tab) {\r\n        this.currentSection = tab.name;\r\n      },\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate(async (valid) => {\r\n          if (valid) {\r\n            const apiUrl = this.currentSection === 'login' ? this.$API.updatePassword : this.$API.updatePayPassword;\r\n            this.loading=true;\r\n            const result = await this.$API.request(apiUrl, 'POST', {...this.ruleForm});\r\n            this.loading=false;\r\n            if (result && result.success) {\r\n              this.$refs[formName].resetFields();\r\n              this.$message.success('修改成功')\r\n            } else {\r\n              this.$message.info(result.msg)\r\n            }\r\n          } else {\r\n            return false;\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\">\r\n    .forgetPassword {\r\n        font-size: 24px;\r\n\r\n        .el-tabs__nav {\r\n            width: 100%;\r\n\r\n            .el-tabs__item {\r\n                width: 50%;\r\n                font-size: 24px;\r\n            }\r\n        }\r\n\r\n        .container {\r\n            padding: 0 40px;\r\n        }\r\n            .el-form{\r\n                margin: 0 auto;\r\n                .el-form-item__content{\r\n                    .el-button.code{\r\n                        width: auto !important;\r\n                        position: absolute;\r\n                        right:-10px;\r\n                        padding: 5px;\r\n                        height: 100%;\r\n                        top:0;\r\n                    }\r\n                }\r\n                .el-input{\r\n                    width: 340px;\r\n                    float: left;\r\n                }\r\n                .code{\r\n                    .el-input{\r\n                        width: 300px;\r\n                    }\r\n                }\r\n                .button{\r\n                    .el-button{\r\n                        width: 100%;\r\n                    }\r\n                }\r\n            }\r\n    }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Password.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Password.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Password.vue?vue&type=template&id=7666abb9&\"\nimport script from \"./Password.vue?vue&type=script&lang=js&\"\nexport * from \"./Password.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Password.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}