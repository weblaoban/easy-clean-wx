{"version":3,"sources":["webpack:///./src/views/Evaluate.vue?082c","webpack:///./src/views/Evaluate.vue?95ee","webpack:///src/views/Evaluate.vue","webpack:///./src/views/Evaluate.vue?6118","webpack:///./src/views/Evaluate.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","attrs","rules","_v","evaluateRequire","domProps","_s","evaluationContent","_e","type","handleAvatarSuccess","ruleForm","top","loading","on","submitForm","staticRenderFns","result","data","component"],"mappings":"kHAAA,yBAA0gB,EAAG,G,gECA7gB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOT,EAAiB,cAAEU,WAAW,kBAAkBC,YAAY,YAAY,CAACP,EAAG,UAAU,CAACO,YAAY,gBAAgBC,MAAM,CAAC,MAAQZ,EAAIa,QAAQ,CAACT,EAAG,IAAI,CAACJ,EAAIc,GAAG,iBAAkBd,EAAIe,gBAAsC,uBAAEX,EAAG,IAAI,CAACJ,EAAIc,GAAG,SAASV,EAAG,OAAO,CAACY,SAAS,CAAC,YAAchB,EAAIiB,GAAGjB,EAAIe,gBAAgBG,wBAAwBlB,EAAImB,KAAMnB,EAAIe,gBAA2B,YAAEX,EAAG,IAAI,CAACJ,EAAIc,GAAG,8BAA8Bd,EAAImB,KAAMnB,EAAIe,gBAA2B,YAAEX,EAAG,eAAe,CAACQ,MAAM,CAAC,KAAO,SAAS,WAAa,MAAM,CAACR,EAAG,YAAY,CAACO,YAAY,kBAAkBC,MAAM,CAAC,OAAS,yBAAyB,kBAAiB,EAAM,KAAO,CAACQ,KAAK,WAAW,KAAO,OAAO,OAAS,2CAA2C,aAAapB,EAAIqB,sBAAsB,CAAErB,EAAIsB,SAAY,IAAElB,EAAG,MAAM,CAACO,YAAY,SAASC,MAAM,CAAC,IAAMZ,EAAIsB,SAASC,OAAOnB,EAAG,IAAI,CAACO,YAAY,yCAAyC,GAAGX,EAAImB,KAAKf,EAAG,MAAM,CAACO,YAAY,UAAU,CAACP,EAAG,YAAY,CAACQ,MAAM,CAAC,KAAO,UAAU,QAAUZ,EAAIwB,SAASC,GAAG,CAAC,MAAQzB,EAAI0B,aAAa,CAAC1B,EAAIc,GAAG,SAAS,IAAI,IAAI,IAC1sCa,EAAkB,G,wBCyBtB,GACE,KAAF,YACE,KAFF,WAGI,MAAJ,CACM,eAAN,EACM,SAAN,EACM,OAAN,GACM,MAAN,GACM,gBAAN,KAGE,QAXF,WAAI,IAAJ,iBAAI,mBAAJ,mHAYA,4BACA,sBAbA,SAcA,6DAdA,OAcA,EAdA,OAeA,sBACA,eACgB1B,KAAKc,gBAAkBa,EAAOC,MAjB9C,gDAAI,SAAJ,mCAAI,OAAJ,KAoBE,QAAF,CACI,oBADJ,SACA,GACM,IAAN,qCACM,EAAN,uBACM,EAAN,YACM,EAAN,aACM,EAAN,kBACM,EAAN,mBACM,EAAN,gBACM,EAAN,oBACM,EAAN,qBACM,EAAN,uBACM,EAAN,+BACM,EAAN,QACM,SAAN,oBACM,EAAN,SACA,8BACQ,KAAR,yBAEM,SAAN,qBAEI,oBArBJ,SAqBA,GACM,KAAN,uBAEI,OAxBJ,WAyBM,KAAN,mBAEI,WA3BJ,WAAM,IAAN,iBAAM,mBAAN,mBAAQ,IAAR,QAAQ,OAAR,8EA4BA,8CA5BA,uBA6BgB,KAAhB,uBA7BA,iCAgCgB,EAAhB,6BACgB,EAAhB,2BACgB5B,KAAKuB,SAAU,EAlC/B,SAmCA,uFAnCA,OAmCgB,EAnChB,OAoCgBvB,KAAKuB,SAAU,EAC/B,cACkB,EAAlB,KACkB,KAAlB,yBACkB,YAAlB,WACoB,EAApB,0BACA,MAEkB,KAAlB,qBA5CA,iDAAM,SAAN,IAAQ,OAAR,wBAAM,OAAN,OC9CkV,I,wBCQ9UM,EAAY,eACd,EACA/B,EACA4B,GACA,EACA,KACA,KACA,MAIa,aAAAG,E","file":"js/chunk-a781fd0e.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Evaluate.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Evaluate.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.getingRequire),expression:\"getingRequire\"}],staticClass:\"evaluate\"},[_c('el-form',{staticClass:\"demo-ruleForm\",attrs:{\"rules\":_vm.rules}},[_c('p',[_vm._v(\"1、完成评价以及买家秀\")]),(_vm.evaluateRequire.isDesignatedEvaluation)?_c('p',[_vm._v(\"指定评价：\"),_c('span',{domProps:{\"textContent\":_vm._s(_vm.evaluateRequire.evaluationContent)}})]):_vm._e(),(_vm.evaluateRequire.isSlideShow)?_c('p',[_vm._v(\"2、评价截图上传（如果任务发布时选取了晒图要求）\")]):_vm._e(),(_vm.evaluateRequire.isSlideShow)?_c('el-form-item',{attrs:{\"prop\":\"screen\",\"labelWidth\":\"0\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"/api/attachment/upload\",\"show-file-list\":false,\"data\":{type:'COMMENT'},\"name\":\"file\",\"accept\":\"image/png,image/gif,image/jpg,image/jpeg\",\"on-success\":_vm.handleAvatarSuccess}},[(_vm.ruleForm.top)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.ruleForm.top}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1):_vm._e(),_c('div',{staticClass:\"button\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.submitForm}},[_vm._v(\"完成\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"evaluate\" v-loading=\"getingRequire\">\r\n        <el-form :rules=\"rules\" class=\"demo-ruleForm\">\r\n            <p>1、完成评价以及买家秀</p>\r\n            <p v-if=\"evaluateRequire.isDesignatedEvaluation\">指定评价：<span v-text=\"evaluateRequire.evaluationContent\"></span></p>\r\n            <p v-if=\"evaluateRequire.isSlideShow\">2、评价截图上传（如果任务发布时选取了晒图要求）</p>\r\n            <el-form-item v-if=\"evaluateRequire.isSlideShow\" prop=\"screen\" labelWidth=\"0\">\r\n                <el-upload\r\n                        class=\"avatar-uploader\"\r\n                        action=\"/api/attachment/upload\"\r\n                        :show-file-list=\"false\"\r\n                        :data=\"{type:'COMMENT'}\"\r\n                        name=\"file\"\r\n                        accept=\"image/png,image/gif,image/jpg,image/jpeg\"\r\n                        :on-success=\"handleAvatarSuccess\">\r\n                    <img v-if=\"ruleForm.top\" :src=\"ruleForm.top\" class=\"avatar\">\r\n                    <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                </el-upload>\r\n            </el-form-item>\r\n            <div class=\"button\">\r\n                <el-button type=\"primary\" @click=\"submitForm\" :loading=\"loading\">完成</el-button>\r\n            </div>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        name: 'startTask',\r\n        data(){\r\n            return{\r\n                getingRequire: false,\r\n                loading: false,\r\n                screen: '',\r\n                rules: {},\r\n                evaluateRequire: {},\r\n            }\r\n        },\r\n        async created(){\r\n            const taskId = this.$route.params.taskId;\r\n            this.getingRequire = true;\r\n            const result = await this.$API.request(this.$API.selectComment, 'POST',{taskId});\r\n            this.getingRequire = false;\r\n            if(result && result.success){\r\n                this.evaluateRequire = result.data;\r\n            }\r\n        },\r\n        methods: {\r\n            copyTextToClipboard(text) {\r\n                const textArea = document.createElement('textarea');\r\n                textArea.style.position = 'fixed';\r\n                textArea.style.top = 0;\r\n                textArea.style.left = 0;\r\n                textArea.style.width = '2em';\r\n                textArea.style.height = '2em';\r\n                textArea.style.padding = 0;\r\n                textArea.style.border = 'none';\r\n                textArea.style.outline = 'none';\r\n                textArea.style.boxShadow = 'none';\r\n                textArea.style.background = 'transparent';\r\n                textArea.value = text;\r\n                document.body.appendChild(textArea);\r\n                textArea.select();\r\n                if (document.execCommand('copy')) {\r\n                    this.$message.success('复制成功');\r\n                }\r\n                document.body.removeChild(textArea);\r\n            },\r\n            handleAvatarSuccess(res) {\r\n                this.ruleForm.screen = res.msg;\r\n            },\r\n            goPrev(){\r\n                this.$emit('submit', 6);\r\n            },\r\n            async submitForm() {\r\n                if(this.evaluateRequire.isSlideShow && !this.screen){\r\n                    this.$message.info('请上传截图');\r\n                    return;\r\n                }\r\n                const taskSubId = this.$route.params.taskSubId;\r\n                const orderId = this.$route.params.orderId;\r\n                this.loading = true;\r\n                const result = await this.$API.request(this.$API.comment, 'POST',{orderId, taskSubId,screen: this.screen});\r\n                this.loading = false;\r\n                if(result && result.success){\r\n                    const that = this;\r\n                    this.$message.success('评价成功')\r\n                    setTimeout(function(){\r\n                        that.$router.push('/myTask');\r\n                    }, 1000)\r\n                } else {\r\n                    this.$message.info(result.msg)\r\n                }\r\n\r\n            }\r\n        },\r\n    }\r\n</script>\r\n<style lang=\"scss\">\r\n    .evaluate{\r\n        padding: 20px 30px 100px;\r\n        .el-form{\r\n            text-align: left;\r\n            h4{\r\n                margin-bottom: 15px;\r\n            }\r\n            p, h4{\r\n                line-height: 50px;\r\n                margin-bottom: 10px;\r\n            }\r\n            .button{\r\n                text-align: center;\r\n                margin-top: 20px;\r\n            }\r\n            .el-button{\r\n                padding: 20px 20px;\r\n                width: 100%;\r\n                a{\r\n                    color: #fff;\r\n                }\r\n            }\r\n        }\r\n        .el-upload {\r\n            border: 2px dashed #d9d9d9;\r\n            border-radius: 6px;\r\n            cursor: pointer;\r\n            position: relative;\r\n            overflow: hidden;\r\n            width: 100%;\r\n            height: 200px;\r\n            float: left;\r\n        }\r\n        .avatar-uploader-icon {\r\n            font-size: 28px;\r\n            color: #8c939d;\r\n            width: 100%;\r\n            height: 200px;\r\n            line-height: 200px;\r\n            text-align: center;\r\n        }\r\n    }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Evaluate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Evaluate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Evaluate.vue?vue&type=template&id=be8c18f2&\"\nimport script from \"./Evaluate.vue?vue&type=script&lang=js&\"\nexport * from \"./Evaluate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Evaluate.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}