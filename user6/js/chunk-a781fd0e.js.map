{"version":3,"sources":["webpack:///./src/views/Evaluate.vue?082c","webpack:///./src/views/Evaluate.vue?9616","webpack:///src/views/Evaluate.vue","webpack:///./src/views/Evaluate.vue?6118","webpack:///./src/views/Evaluate.vue?a3d5"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","attrs","rules","_v","evaluateRequire","domProps","_s","evaluationContent","_e","handelAvatarProgress","validateSize","type","handleAvatarSuccess","ruleForm","top","loading","on","submitForm","staticRenderFns","result","data","component"],"mappings":"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","file":"js/chunk-a781fd0e.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Evaluate.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Evaluate.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.getingRequire),expression:\"getingRequire\"}],staticClass:\"evaluate\"},[_c('el-form',{staticClass:\"demo-ruleForm\",attrs:{\"rules\":_vm.rules}},[_c('p',[_vm._v(\"1、完成评价以及买家秀\")]),(_vm.evaluateRequire.isDesignatedEvaluation)?_c('p',[_vm._v(\"指定评价：\"),_c('span',{domProps:{\"textContent\":_vm._s(_vm.evaluateRequire.evaluationContent)}})]):_vm._e(),(_vm.evaluateRequire.isSlideShow)?_c('p',[_vm._v(\"2、评价截图上传（如果任务发布时选取了晒图要求）\")]):_vm._e(),(_vm.evaluateRequire.isSlideShow)?_c('el-form-item',{attrs:{\"prop\":\"screen\",\"labelWidth\":\"0\"}},[_c('el-upload',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.uploadLoading),expression:\"uploadLoading\"}],staticClass:\"avatar-uploader\",attrs:{\"on-progress\":_vm.handelAvatarProgress,\"before-upload\":_vm.validateSize,\"action\":\"/api/attachment/upload\",\"show-file-list\":false,\"data\":{type:'COMMENT'},\"name\":\"file\",\"accept\":\"image/png,image/gif,image/jpg,image/jpeg\",\"on-success\":_vm.handleAvatarSuccess}},[(_vm.ruleForm.top)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.ruleForm.top}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1):_vm._e(),_c('div',{staticClass:\"button\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.submitForm}},[_vm._v(\"完成\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"evaluate\" v-loading=\"getingRequire\">\n        <el-form :rules=\"rules\" class=\"demo-ruleForm\">\n            <p>1、完成评价以及买家秀</p>\n            <p v-if=\"evaluateRequire.isDesignatedEvaluation\">指定评价：<span v-text=\"evaluateRequire.evaluationContent\"></span></p>\n            <p v-if=\"evaluateRequire.isSlideShow\">2、评价截图上传（如果任务发布时选取了晒图要求）</p>\n            <el-form-item v-if=\"evaluateRequire.isSlideShow\" prop=\"screen\" labelWidth=\"0\">\n                <el-upload\n                        v-loading=\"uploadLoading\"\n                        :on-progress=\"handelAvatarProgress\"\n                        :before-upload=\"validateSize\"\n                        class=\"avatar-uploader\"\n                        action=\"/api/attachment/upload\"\n                        :show-file-list=\"false\"\n                        :data=\"{type:'COMMENT'}\"\n                        name=\"file\"\n                        accept=\"image/png,image/gif,image/jpg,image/jpeg\"\n                        :on-success=\"handleAvatarSuccess\">\n                    <img v-if=\"ruleForm.top\" :src=\"ruleForm.top\" class=\"avatar\">\n                    <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                </el-upload>\n            </el-form-item>\n            <div class=\"button\">\n                <el-button type=\"primary\" @click=\"submitForm\" :loading=\"loading\">完成</el-button>\n            </div>\n        </el-form>\n    </div>\n</template>\n<script>\n    export default {\n        name: 'startTask',\n        data(){\n            return{\n              uploadLoading: false,\n                getingRequire: false,\n                loading: false,\n                screen: '',\n                rules: {},\n                evaluateRequire: {},\n            }\n        },\n        async created(){\n            const taskId = this.$route.params.taskId;\n            this.getingRequire = true;\n            const result = await this.$API.request(this.$API.selectComment, 'POST',{taskId});\n            this.getingRequire = false;\n            if(result && result.success){\n                this.evaluateRequire = result.data;\n            }\n        },\n        methods: {\n            copyTextToClipboard(text) {\n                const textArea = document.createElement('textarea');\n                textArea.style.position = 'fixed';\n                textArea.style.top = 0;\n                textArea.style.left = 0;\n                textArea.style.width = '2em';\n                textArea.style.height = '2em';\n                textArea.style.padding = 0;\n                textArea.style.border = 'none';\n                textArea.style.outline = 'none';\n                textArea.style.boxShadow = 'none';\n                textArea.style.background = 'transparent';\n                textArea.value = text;\n                document.body.appendChild(textArea);\n                textArea.select();\n                if (document.execCommand('copy')) {\n                    this.$message.success('复制成功');\n                }\n                document.body.removeChild(textArea);\n            },\n            handleAvatarSuccess(res) {\n              this.uploadLoading = false\n                this.ruleForm.screen = res.msg;\n            },\n            goPrev(){\n                this.$emit('submit', 6);\n            },\n          validateSize(file) {\n            const isLt2M = file.size / 1024 / 1024 < 2;\n            if (!isLt2M) {\n              this.$message.error('上传头像图片大小不能超过 2MB!');\n            }\n            return isLt2M;\n          },\n          handelAvatarProgress() {\n            this.uploadLoading = true\n          },\n            async submitForm() {\n                if(this.evaluateRequire.isSlideShow && !this.screen){\n                    this.$message.info('请上传截图');\n                    return;\n                }\n                const taskSubId = this.$route.params.taskSubId;\n                const orderId = this.$route.params.orderId;\n                this.loading = true;\n                const result = await this.$API.request(this.$API.comment, 'POST',{orderId, taskSubId,screen: this.screen});\n                this.loading = false;\n                if(result && result.success){\n                    const that = this;\n                    this.$message.success('评价成功')\n                    setTimeout(function(){\n                        that.$router.push('/myTask');\n                    }, 1000)\n                } else {\n                    this.$message.info(result.msg)\n                }\n\n            }\n        },\n    }\n</script>\n<style lang=\"scss\">\n    .evaluate{\n        padding: 20px 30px 100px;\n        .el-form{\n            text-align: left;\n            h4{\n                margin-bottom: 15px;\n            }\n            p, h4{\n                line-height: 50px;\n                margin-bottom: 10px;\n            }\n            .button{\n                text-align: center;\n                margin-top: 20px;\n            }\n            .el-button{\n                padding: 20px 20px;\n                width: 100%;\n                a{\n                    color: #fff;\n                }\n            }\n        }\n        .el-upload {\n            border: 2px dashed #d9d9d9;\n            border-radius: 6px;\n            cursor: pointer;\n            position: relative;\n            overflow: hidden;\n            width: 100%;\n            height: 200px;\n            float: left;\n        }\n        .avatar-uploader-icon {\n            font-size: 28px;\n            color: #8c939d;\n            width: 100%;\n            height: 200px;\n            line-height: 200px;\n            text-align: center;\n        }\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Evaluate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Evaluate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Evaluate.vue?vue&type=template&id=facfe2d4&\"\nimport script from \"./Evaluate.vue?vue&type=script&lang=js&\"\nexport * from \"./Evaluate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Evaluate.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}