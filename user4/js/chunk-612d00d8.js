(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-612d00d8"],{"06e8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"realName"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{prop:"name"}},[r("el-input",{attrs:{placeholder:"（注册时填写的真实姓名，不可修改）",disabled:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("el-form-item",{attrs:{prop:"idNumber"}},[r("el-input",{attrs:{placeholder:"请输入您的身份证号码",disabled:3===e.authState},model:{value:e.ruleForm.idNumber,callback:function(t){e.$set(e.ruleForm,"idNumber",t)},expression:"ruleForm.idNumber"}})],1),r("el-form-item",{attrs:{prop:"positivePhoto"}},[r("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.avatarLoading,expression:"avatarLoading"}],staticClass:"avatar-uploader",attrs:{action:"/api/attachment/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-progress":e.handelAvatarProgress,accept:"image/png,image/gif,image/jpg,image/jpeg",data:{type:"REAL_NAME_CHART"},name:"file"}},[e.ruleForm.positivePhoto?r("img",{staticClass:"avatar",attrs:{src:e.ruleForm.positivePhoto}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),r("p",[e._v("本人手持身份证正面")])],1),r("el-form-item",{attrs:{prop:"backPhoto"}},[r("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.backLoading,expression:"backLoading"}],staticClass:"avatar-uploader",attrs:{action:"/api/attachment/upload","show-file-list":!1,data:{type:"REAL_NAME_CHART"},name:"file",accept:"image/png,image/gif,image/jpg,image/jpeg","on-progress":e.handelOtherProgress,"on-success":e.handleOtherSuccess}},[e.ruleForm.backPhoto?r("img",{staticClass:"avatar",attrs:{src:e.ruleForm.backPhoto}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),r("p",[e._v("本人手持身份证反面")])],1),r("el-form-item",[0===e.authState?r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]):e._e(),3===e.authState?r("el-button",{attrs:{type:"info"}},[e._v("审核中")]):e._e()],1)],1)],1)},n=[],s=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),o=(r("7f7f"),r("96cf"),r("3b8d"));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(r,!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c={name:"realName",data:function(){return{backLoading:!1,avatarLoading:!1,loading:!1,authState:0,name:"",ruleForm:{idNumber:"",positivePhoto:"",backPhoto:""},rules:{idNumber:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$API.request(this.$API.userAuth,"POST");case 2:return t=e.sent,t&&t.success&&(r=t.data,this.authState=r.identityAuth),e.next=6,this.$API.request(this.$API.getUserInfo,"POST");case 6:a=e.sent,a&&a.success&&(n=a.data,this.name=n.name),"OVERTIME"===a.code&&this.$router.push("/login");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=15;break}if(t.ruleForm.positivePhoto){e.next=4;break}return t.$message.error("请上传身份证正面照"),e.abrupt("return");case 4:if(t.ruleForm.backPhoto){e.next=7;break}return t.$message.error("请上传身份证反面照"),e.abrupt("return");case 7:return t.loading=!0,e.next=10,t.$API.request(t.$API.identityAuth,"POST",u({},t.ruleForm));case 10:a=e.sent,t.loading=!1,a&&a.success?(t.$message.success("提交成功"),n=t,setTimeout((function(){n.$router.push("/userInfo")}),1e3)):t.$message.error(a.msg),e.next=16;break;case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handelAvatarProgress:function(e,t){this.avatarLoading=!0},handelOtherProgress:function(){this.backLoading=!0},handleAvatarSuccess:function(e){alert("success"),this.avatarLoading=!1,this.ruleForm.positivePhoto=e.msg},handleOtherSuccess:function(e){this.backLoading=!1,this.ruleForm.backPhoto=e.msg}}},l=c,m=(r("4665"),r("2877")),p=Object(m["a"])(l,a,n,!1,null,null,null);t["default"]=p.exports},4665:function(e,t,r){"use strict";var a=r("fce0"),n=r.n(a);n.a},"7f7f":function(e,t,r){var a=r("86cc").f,n=Function.prototype,s=/^\s*function ([^ (]*)/,o="name";o in n||r("9e1e")&&a(n,o,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},fce0:function(e,t,r){}}]);
//# sourceMappingURL=chunk-612d00d8.js.map